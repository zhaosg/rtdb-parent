<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="servicePublisher" class="com.infosys.rpc.thrift.remote.base.ThriftServicePublisher">
		<property name="definitions">
			<array>
				<bean class="com.infosys.rpc.remote.ServiceDefinition">
					<property name="serviceName" value="RtdbService"></property>
					<property name="interfaceClass" value="com.infosys.rpc.api.RtdbService"></property>
					<property name="implInstance">
						<bean class="com.infosys.rpc.impl.RtdbServiceImpl" />
					</property>
				</bean>
			</array>
		</property>
		<property name="messageConvert">
			<bean class="com.infosys.rpc.thrift.remote.ThriftMessageConvert">
				<property name="serializer">
					<bean class="com.infosys.rpc.thrift.remote.KryoSerializer"></bean>
				</property>
			</bean>
		</property>
	</bean>

	<bean class="com.infosys.rpc.thrift.server.ThriftHsHaServer">
		<property name="processor" ref="servicePublisher"></property>
		<property name="port" value="8081"></property>
		<property name="minWorkerThreads" value="100"></property>
		<property name="workerThreads" value="500"></property>
		<property name="security" value="true"></property>
		<property name="stopTimeoutVal" value="3000"></property>
		<property name="clientTimeout" value="10000"></property>
		<property name="allowedFromTokens">
			<map>
				<entry key="DONGJIAN" value="DSIksduiKIOYUIOkYIOhIOUIOhjklYUI"></entry>
			</map>
		</property>
		<property name="protocolFactory">
			<bean class="org.apache.thrift.protocol.TTupleProtocol.Factory"></bean>
		</property>
	</bean>
</beans>
